import ProjectDescription
import ProjectDescriptionHelpers

let essentialAppTarget = TargetReference.project(
    path: "EssentialApp",
    target: "EssentialApp"
)

let essentialAppTestTarget = TargetReference.project(
    path: "EssentialApp",
    target: "EssentialAppTests"
)

let ciIOSScheme: Scheme = .scheme(
    name: "CI_iOS",
    buildAction: .buildAction(targets: [essentialAppTarget]),
    testAction: .targets([.testableTarget(target: essentialAppTestTarget)]),
//    testAction: .testPlans(
//        [.path("Testplans/CI_iOSa.xctestplan")]
//    ),
    runAction: .runAction(configuration: .essentialAppDebug, executable: essentialAppTarget),
    archiveAction: .archiveAction(configuration: .essentialAppRelease),
    analyzeAction: .analyzeAction(configuration: .essentialAppRelease)
)

let workspace = Workspace(
    name: "EssentialApp",
    projects: ["EssentialFeed", "EssentialApp"],
    schemes: [ciIOSScheme],
    generationOptions: .options(autogeneratedWorkspaceSchemes: .disabled)
)

